<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="p:domain_verify" content="a748b59472c683b6712342982728ecd2"/>

    
    <title>Writing modules with poor javascript - Gevorg Harutyunyan</title>
    <meta name="keywords" content="javascript, Gevorg, Harutuynyan" />
    <meta name="description" content="Writing modules with poor javascript"/>
    

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>

    <link href="/css/prism.css" rel="stylesheet" >
    <link href="/css/styles.css" rel="stylesheet" >
</head>
<body>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48892246-1', 'gevorg.me');
    ga('send', 'pageview');

</script>
<div class="content">
    <a href="/" class="main-header">
        <h1>About many things</h1>
    </a>
    <section class="post">
    <header>
        <h1>Writing modules with poor javascript</h1>
    </header>
    <time>
        05 May 2016
    </time>
    <article>
        <p>Recently I was working on javascript project called <a href="http://foofiles.com">FooFiles</a> and want to write about pattern
that I used there.</p>

<p>I will explain pattern and write a bit about positive and negative things that I found.
<!--more--></p>

<h2 id="what-i-needed">What I needed?</h2>

<p>I needed modular pattern to use it in my application and certainly there are many libraries or
external tools that I can use to achieve that.</p>

<p>Good option could be to use <a href="http://coffeescript.org/">CoffeeScript</a> or <a href="http://requirejs.org/">require.js</a> that are
perfectly doing that.</p>

<p>However I had specific rule for my project to have no external dependencies for core part of it, so it runs fast and
smooth.</p>

<h2 id="my-pattern">My pattern</h2>

<p>Below is what I decided to use:</p>

<pre><code class="language-javascript">// New FooFiles unit.
ff.newUnit = (function(dependency1, dependency2, undefined) {
    'use strict';

    // Private data/functions go here.
    var privateString = "Very Private";
    function privateFunc(param1, param2) {
        ...
    }
    ...

    // Public data/functions go here.
    var self = {
        publicString: "Hello Unit!",
        publicFunc: function (param1) {
            ...
        }
        ...
    };

    // Return unit instance.
    return self;
})(dependency1, dependency2);
</code></pre>

<h2 id="good-things">Good things</h2>

<p>Good things about this pattern are:</p>

<ul>
  <li>To expose things you just need to wire them to <code class="highlighter-rouge">self</code> object or they will remain private</li>
  <li>Usage parameters are listed as input parameters for anonymous function call, so you must define input for each <code class="highlighter-rouge">module</code></li>
  <li>If someone will change <code class="highlighter-rouge">undefined</code> in external scope that will not affect your module, because it has its own version inside.</li>
</ul>

<h2 id="bad-things">Bad things</h2>

<p>I had problems with this pattern in case of module interdependency.
Instead of managing load cycles I decided to use <a href="https://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a> to
detach modules that are interdependent.</p>

<p>So if <code class="highlighter-rouge">module1</code> and <code class="highlighter-rouge">module2</code> were interdependent, I removed one side dependency and replaced it with following:</p>

<pre><code class="language-javascript">// From module1
on('EVENT_FROM_MODULE', function(data) {
...
});

...
// From module2
fire('EVENT_FROM_MODULE', {data: 'some important data'});
...
</code></pre>

<h2 id="related-links">Related links</h2>

<ul>
  <li><a href="https://github.com/gevorg/foofiles">FooFiles is your very own personal file space on web</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Observer_pattern">Observer pattern</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Immediately-invoked_function_expression">Immediately-invoked function expression</a></li>
</ul>

    </article>
    <div class="tags">
        
        <span>
            <a href="/tag/javascript">#javascript</a>
        </span>
        
    </div>
    
    <div id="disqus_thread"></div>
    <script>
         var disqus_config = function () {
             this.page.url = "http://gevorg.me/Writing-modules-with-poor-javascript/";
             this.page.identifier = "Writing modules with poor javascript";
         };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//gevorgha.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
</section>

    <nav>
        <ul>
            <li><a href="/feed.xml" target="_blank">feed</a></li>
            <li><a href="/GevorgHarutyunyanCV.pdf" target="_blank">cv</a></li>
        </ul>
    </nav>
</div>
<footer>
    It is transformed by <a target="_blank" href="https://github.com/jekyll/jekyll">Jekyll</a>
    into a static site before I push <a target="_blank" href="https://github.com/gevorg/gevorg.github.io">this repository</a> to GitHub.
</footer>

<script src="/js/prism.js"></script>
</body>
</html>
