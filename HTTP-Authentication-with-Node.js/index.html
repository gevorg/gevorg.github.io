<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="p:domain_verify" content="a748b59472c683b6712342982728ecd2"/>

    
    <title>HTTP Authentication with Node.js - Gevorg Harutyunyan</title>
    <meta name="keywords" content="node.js, Gevorg, Harutuynyan" />
    <meta name="description" content="HTTP Authentication with Node.js"/>
    

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>

    <link href="/css/prism.css" rel="stylesheet" >
    <link href="/css/styles.css" rel="stylesheet" >

    <script type='text/javascript' data-cfasync='false' src='//dsms0mj1bbhn4.cloudfront.net/assets/pub/shareaholic.js' data-shr-siteid='01757f1e456dfc4e4ffc292969c6c56e' async='async'></script>
</head>
<body>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48892246-1', 'gevorg.me');
    ga('send', 'pageview');

</script>
<div class="content">
    <a href="/" class="main-header">
        <h1>About many things</h1>
    </a>
    <section class="post">
    <header>
        <h1>HTTP Authentication with Node.js</h1>
    </header>
    <time>
        03 May 2016
    </time>
    <article>
        <p>Everyone familiar with <a href="https://httpd.apache.org/">Apache HTTP Server</a> knows the most popular way of setting up
HTTP Basic / Digest access authentication.</p>

<p>Yes! I want to write about .htpasswd and .htdigest files and how can you use them in your Node.js application.
<!--more-->
In this article I will write about <a href="http://http-auth.info/">http-auth</a> module that I created to support .htpasswd and
.htdigest files in Node.js applications.</p>

<h2 id="installation">Installation</h2>
<p>The best way of installing it is via <a href="https://www.npmjs.com/">npm</a>:</p>

<pre><code class="language-bash">$ npm install http-auth</code></pre>

<h2 id="usage">Usage</h2>
<p>Depending what type of authentication you want to use you should call corresponding method <code class="highlighter-rouge">auth.basic</code> or
<code class="highlighter-rouge">auth.digest</code>. You can view available configurations in <a href="https://github.com/http-auth/http-auth#configurations">configurations section</a>.</p>

<pre><code class="language-javascript">// Authentication module.
var auth = require('http-auth');
var basic = auth.basic({
    realm: "Simon Area.",
    file: __dirname + "/../data/users.htpasswd"
});

// Creating new HTTP server.
http.createServer(basic, function(req, res) {
    res.end("Welcome to private area - " + req.user + "!");
}).listen(1337);
</code></pre>

<p>You might notice that application is calling <a href="https://nodejs.org/api/http.html#http_http_createserver_requestlistener">http.createServer</a>
with mutated argument list, which is strange.</p>

<p>Correct! Application is changing native node.js method to provide some flexibility in usage. You might
say that it is not future proof and <strong>one should never change what he / she does not own</strong>.</p>

<p>You are right, I just thought that there is very little possibility that the most used method in <a href="https://nodejs.org">Node.js</a> will be changed.</p>

<h2 id="integrations">Integrations</h2>
<p>Module has integrations with some popular <a href="https://nodejs.org">Node.js</a> modules and for sure the most important one is
<a href="http://expressjs.com">express.js</a> integration.</p>

<pre><code class="language-javascript">// Authentication module.
var auth = require('http-auth');
var basic = auth.basic({
    realm: "Simon Area.",
    file: __dirname + "/../data/users.htpasswd"
});

// Application setup.
var app = express();
app.use(auth.connect(basic));

// Setup route.
app.get('/', function(req, res){
  res.send("Hello from express - " + req.user + "!");
});
</code></pre>

<h2 id="command-line-tools">Command line tools</h2>
<p>As a bonus you can install <a href="https://github.com/http-auth/htpasswd/">htpasswd</a> or <a href="https://github.com/http-auth/htdigest/">htdigest</a>
command line tools using npm. Those should provide functionality similar to Apacheâ€™s tools.</p>

<pre><code class="language-bash">$ npm install -g htpasswd</code></pre>

<p>or</p>

<pre><code class="language-bash">$ npm install -g htdigest</code></pre>

<h2 id="related-links">Related links</h2>

<ul>
  <li><a href="http://http-auth.info">Node.js package for HTTP basic and digest access authentication.</a></li>
  <li><a href="https://github.com/http-auth/http-auth">GitHub repository</a></li>
</ul>

    </article>
    <div class="tags">
        
        <span>
            <a href="/tag/node.js">#node.js</a>
        </span>
        
    </div>
    
</section>

    <nav>
        <ul>
            <li><a href="/feed.xml" target="_blank">feed</a></li>
            <li><a href="/GevorgHarutyunyanCV.pdf" target="_blank">cv</a></li>
        </ul>
    </nav>
</div>
<footer>
    It is transformed by <a target="_blank" href="https://github.com/jekyll/jekyll">Jekyll</a>
    into a static site before I push <a target="_blank" href="https://github.com/gevorg/gevorg.github.io">this repository</a> to GitHub.
</footer>

<script src="/js/prism.js"></script>
</body>
</html>
